@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    isolation: isolate;

    --sh-class: #2d5e9d;
    --sh-identifier: #354150;
    --sh-sign: #8996a3;
    --sh-string: #007f7a;
    --sh-keyword: #e02518;
    --sh-comment: #598b44;
    --sh-jsxliterals: #6266d1;
  }

  :root[data-theme='dark'] {
    --sh-class: #4c97f8;
    --sh-identifier: white;
    --sh-keyword: #f47067;
    --sh-string: #0fa295;
  }
}

.prose pre code {
  counter-reset: sh-line-number;
}

.prose pre code .sh__line::before {
  counter-increment: sh-line-number 1;
  content: counter(sh-line-number);
  margin-right: 24px;
  text-align: right;
  color: hsl(var(--fg-neutral-fade));
}

summary::-webkit-details-marker {
  @apply hidden;
}

/* For animations */
.fill-mode-forwards {
  animation-fill-mode: forwards;
}

.animate-in {
  animation: animateIn 0.3s ease 0.15s both;
}

@keyframes animateIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.shiki {
  counter-reset: step;
  counter-increment: step 0;
  .line {
    @apply border-l-4 border-transparent;
    &::before {
      counter-increment: step;
      @apply text-neutral-600 mr-6 inline-block w-4 border-transparent text-right content-[counter(step)];
    }
    &.highlighted,
    &.diff {
      @apply -ml-4 -mr-5 inline-block w-[calc(100%+(theme(spacing.5)+theme(spacing.4)))] pl-4 pr-5;
    }
    &.highlighted {
      @apply border-neutral-500 bg-neutral-800;
    }
    &.diff {
      &.add,
      &.remove {
        span:first-child::before {
          @apply -ml-4 inline-flex w-4;
        }
      }
      &.add {
        @apply border-blue-500 bg-blue-500/25 before:text-blue-500;
        span:first-child::before {
          @apply text-blue-500 content-["+"];
        }
      }
      &.remove {
        @apply border-orange-500 bg-orange-500/30 *:!text-neutral-400 before:text-orange-500 opacity-70;
        span:first-child::before {
          @apply text-orange-500 content-["-"];
        }
      }
    }
  }
}
